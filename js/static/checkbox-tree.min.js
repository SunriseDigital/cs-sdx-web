/**
 * 階層化されたチェックボックスで親子関係でチェックを入れたり外したりする
 * 親に`checkbox-tree`のクラスを付与し、data-checkbox-tree-groupで子供のセレクタをセットしておく。
 *
 * <input class="checkbox-tree" type="checkbox" name="pref" data-checkbox-tree-group=".pref_1"> 東京
 *   <input class="checkbox-tree pref_1" type="checkbox" name="pref" data-checkbox-tree-group=".ac_1"> 新宿
 *     <input type="checkbox" value="1" name="area" class="pref_1 ac_1">歌舞伎町
 */
$(function(){function c(c){setTimeout(function(){c.prop("checked",$.makeArray(c.data("$childCheckboxies")).every(function(c){return $(c).prop("checked")}))},0)}$(".checkbox-tree").each(function(){var e=$(this),n=$(e.attr("data-checkbox-tree-group"));e.data("$childCheckboxies",n),e.data("checkChildren",function(){c(e)}),n.each(function(){var n=$(this);n.data("$parentCheckbox",e),n.data("checkChildren",function(){c(n)})}),e.on("change",function(){n.prop("checked",e.prop("checked"))}),n.on("change",function(){for(var c=e;c;)c.data("checkChildren")(),c=c.data("$parentCheckbox")})})});